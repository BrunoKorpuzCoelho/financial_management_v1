<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurações - Gestão Financeira</title>
    <link rel="stylesheet" href="/static/settings/css/main.css">
</head>
<body data-is-admin="{{ 'true' if is_admin else 'false' }}">
    <div class="app">
        <header class="header">
            <div class="header-content">
                <button class="back-btn" onclick="goBack()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                        <path d="m15 18-6-6 6-6"/>
                    </svg>
                </button>
                <div class="header-content">
                    <div class="btn-container">
                        <button class="logout-btn" onclick="openInfoModal()">
                            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="m13,7c0,.552-.448,1-1,1s-1-.448-1-1,.448-1,1-1,1,.448,1,1Zm11,12.5v-7.145C24,5.869,19.097.454,12.838.028c-3.469-.236-6.876,1.036-9.329,3.492C1.057,5.977-.211,9.378.029,12.854c.441,6.354,6.074,11.146,13.104,11.146h6.367c2.481,0,4.5-2.019,4.5-4.5ZM12.77,1.026c5.737.39,10.23,5.366,10.23,11.329v7.145c0,1.93-1.57,3.5-3.5,3.5h-6.367c-6.604,0-11.695-4.296-12.105-10.214-.221-3.188.941-6.308,3.189-8.559,2.07-2.073,4.878-3.227,7.8-3.227.25,0,.502.008.753.025Zm.23,17.474v-7c0-.827-.673-1.5-1.5-1.5h-1c-.276,0-.5.224-.5.5s.224.5.5.5h1c.275,0,.5.225.5.5v7c0,.276.224.5.5.5s.5-.224.5-.5Z"/>
                            </svg>
                        </button>
                        <button class="logout-btn" onclick="handleLogout()">
                            <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                            </svg>
                            Sair
                        </button>
                    </div>
                </div>  
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="settings-container">
                <h2 class="settings-title">Configurações da Empresa</h2>
                
                <form id="settingsForm" action="/save-settings" method="POST">
                    <div class="form-group">
                        <label for="totalInsuranceValue">Valor de Outros Seguros (€)</label>
                        <input type="number" id="totalInsuranceValue" name="total_insurance_value" placeholder="0.00" step="0.01" value="0.00">
                        <small class="input-help">Valor de outros seguros da empresa sem contar com o dos empregados</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="rentValue">Valor da Renda (€)</label>
                        <input type="number" id="rentValue" name="rent_value" placeholder="0.00" step="0.01" value="0.00">
                        <small class="input-help">Valor mensal da renda do espaço</small>
                    </div>

                    <div class="form-group">
                        <label for="otherExpenses">Outros Valores (€)</label>
                        <input type="number" id="otherExpenses" name="other_expenses" placeholder="0.00" step="0.01" value="0.00">
                        <small class="input-help">Valor mensal de outras despesas</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="employeeInsuranceValue">Valor dos Seguros dos Empregados (€)</label>
                        <input type="number" id="employeeInsuranceValue" name="employee_insurance_value" placeholder="0.00" step="0.01" value="0.00">
                        <small class="input-help">Valor total dos seguros dos empregados</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="preferredSalaryExpenseDay">Dia para Despesa de Ordenados</label>
                        <select id="preferredSalaryExpenseDay" name="preferred_salary_expense_day" class="form-select">
                            <option value="99">Último dia do mês</option>
                        </select>
                        <small class="input-help">Dia do mês em que os ordenados devem ser registados como despesa</small>
                    </div>
                    
                    <input type="hidden" id="companyIdInput" name="company_id" value="{{ company_id }}">
                    
                    <div class="settings-actions">
                        <button type="submit" class="btn-primary">Guardar Configurações</button>
                    </div>
                </form>
            </div>
        </main>

        <div class="toast toast-success" id="toast" style="display: none;">
            <div class="toast-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#10b981" width="24" height="24">
                    <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z" clip-rule="evenodd" />
                </svg>
            </div>
            <div class="toast-content">
                <span id="toastMessage">Configurações salvas com sucesso!</span>
            </div>
            <button class="toast-close" onclick="hideToast()">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
                    <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 011.06 0L12 10.94l5.47-5.47a.75.75 0 111.06 1.06L13.06 12l5.47 5.47a.75.75 0 11-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 01-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 010-1.06z" clip-rule="evenodd" />
                </svg>
            </button>
        </div>
    </div>

    <div id="infoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Configurações do Sistema</h2>
                <span class="close-btn" onclick="closeInfoModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="infoForm">
                    <div class="form-group">
                        <label for="paymentDate">Data de Pagamento VPS</label>
                        <input type="date" id="paymentDate" name="payment_vps_date">
                    </div>
                    
                    <div class="form-group">
                        <label for="subscriptionType">Tipo de Subscrição</label>
                        <select id="subscriptionType" name="subscription_type_vps" class="form-select">
                            <option value="mensal">Mensal</option>
                            <option value="anual">Anual</option>
                            <option value="24meses">24 Meses</option>
                        </select>
                    </div>
                    
                    <div class="settings-actions">
                        <button type="button" class="btn-primary" onclick="saveInfoSettings()">Guardar Configurações</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/static/settings/js/main.js"></script>
</body>
</html>